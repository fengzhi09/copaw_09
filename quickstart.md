# Copaw å¿«é€Ÿå…¥é—¨æŒ‡å—

> Copaw å¤š Agent åä½œç³»ç»Ÿ

---

## ä¸€ã€ç³»ç»Ÿç®€ä»‹

Copaw æ˜¯ä¸€ä¸ªå¤š Agent åä½œç³»ç»Ÿï¼ŒåŒ…å«ï¼š

| Agent | ç¼–å· | èŒè´£ |
|-------|------|------|
| ğŸ  ç®¡ç†é«˜æ‰‹ | 00 | åˆ›å»º Agentã€ç³»ç»Ÿç®¡ç†ã€çŠ¶æ€æ±‡æŠ¥ |
| ğŸ§  å­¦éœ¸ | 01 | å­¦æœ¯æœç´¢ã€è®ºæ–‡è°ƒç ” |
| ğŸ’» ç¼–ç¨‹é«˜æ‰‹ | 02 | ä»£ç å¼€å‘ã€å·¥å…·é“¾æ£€æŸ¥ |
| ğŸ¨ åˆ›æ„é’å¹´ | 03 | æ–‡å­—åˆ›ä½œã€ç»˜ç”»æç¤ºè¯ |
| ğŸ“Š ç»Ÿè®¡å­¦é•¿ | 04 | æ¯æ—¥å¤ç›˜ã€çŸ¥è¯†æ”¶è— |

---

## äºŒã€å®‰è£…é…ç½®

### 2.1 ç¯å¢ƒè¦æ±‚

- Python 3.10+
- CUDA (å¯é€‰ï¼Œç”¨äºæœ¬åœ°æ¨¡å‹)
- PostgreSQL (å¯é€‰ï¼Œç”¨äºè®°å¿†å­˜å‚¨)

### 2.2 å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/lhl coping/copaw_09.git
cd copaw_09

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda create -n copaw python=3.12
conda activate copaw

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2.3 é…ç½®ç¯å¢ƒå˜é‡

```bash
# é£ä¹¦é…ç½®
export FEISHU_APP_ID="your_app_id"
export FEISHU_APP_SECRET="your_app_secret"
export FEISHU_BOT_PREFIX="/ai"

# æ™ºè°± API (ç”¨äºå‰é¢å¶)
export ZHIPU_API_KEY="your_zhipu_key"

# MiniMax API (å¤‡ç”¨)
export MINIMAX_API_KEY="your_minimax_key"
```

### 2.4 é…ç½®æ–‡ä»¶

åˆ›å»º `~/.copaw_mgr.yaml`:

```yaml
app:
  name: copaw
  version: "1.0"

config:
  channel:
    feishu:
      enabled: true
      app_id: "${FEISHU_APP_ID}"
      app_secret: "${FEISHU_APP_SECRET}"
      bot_prefix: "/ai"
      filters:
        ignore_keywords: []
        ignore_users: []
```

---

## ä¸‰ã€ä½¿ç”¨æ–¹æ³•

### 3.1 å¯åŠ¨ç³»ç»Ÿ

```bash
# æ–¹å¼1: ç›´æ¥è¿è¡Œ
python -m app.main

# æ–¹å¼2: ä½¿ç”¨å¯åŠ¨è„šæœ¬
bash start.sh
```

### 3.2 é€šè¿‡é£ä¹¦å¯¹è¯

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `@AI æœç´¢æœºå™¨å­¦ä¹ è®ºæ–‡` | å­¦æœ¯æœç´¢ |
| `@AI å¸®æˆ‘å†™ä¸ª Python è„šæœ¬` | ä»£ç å¼€å‘ |
| `@AI å†™ä¸€æ®µå°çº¢ä¹¦æ–‡æ¡ˆ` | åˆ›æ„å†™ä½œ |
| `@AI åˆ›å»ºæ–° Agent` | ç³»ç»Ÿç®¡ç† |
| `@AI æŸ¥çœ‹æœ¬æœˆæˆæœ¬` | ç»Ÿè®¡æŠ¥è¡¨ |

### 3.3 åˆ›å»ºæ–° Agent

```
ç”¨æˆ·: åˆ›å»ºä¸€ä¸ªå­¦æœ¯åŠ©æ‰‹
AI: è¯·é—®éœ€è¦å…·å¤‡å“ªäº›æŠ€èƒ½ï¼Ÿ
ç”¨æˆ·: æœç´¢å’Œè®ºæ–‡è°ƒç ”
AI: ğŸ“‹ éœ€æ±‚ç¡®è®¤
    - Agent åç§°: å­¦æœ¯åŠ©æ‰‹
    - è§’è‰²: academic
    - æŠ€èƒ½: academic_search, paper_review
    è¯·ç¡®è®¤ä»¥ä¸Šä¿¡æ¯ï¼Œå›å¤"ç¡®è®¤"åˆ›å»º
ç”¨æˆ·: ç¡®è®¤
AI: âœ… Agent åˆ›å»ºæˆåŠŸï¼
```

---

## å››ã€æ¨¡å—è¯´æ˜

### 4.1 Gateway (ç½‘å…³)

æ¶ˆæ¯å…¥å£ï¼Œè´Ÿè´£ï¼š
- èº«ä»½è®¤è¯
- äº‹ä»¶è¿‡æ»¤
- æ¶ˆæ¯åˆ†å‘

### 4.2 Brain (è„‘éƒ¨)

- **ä¸˜è„‘ (Thalamus)**: æ„å›¾è¯†åˆ«ã€è·¯ç”±å†³ç­–
- **å‰é¢å¶ (Prefrontal)**: æ·±åº¦æ€è€ƒã€æ¨ç†è§„åˆ’

### 4.3 Channels (æ¸ é“)

æ”¯æŒçš„é€šè®¯æ¸ é“ï¼š
- é£ä¹¦
- é’‰é’‰
- QQ
- Discord
- Telegram

### 4.4 è®°å¿†ç³»ç»Ÿ

- **çŸ­æœŸè®°å¿†**: å½“å‰ä¼šè¯ä¸Šä¸‹æ–‡
- **é•¿æœŸè®°å¿†**: é‡è¦ä¿¡æ¯æŒä¹…åŒ–

---

## äº”ã€å¼€å‘æŒ‡å—

### 5.1 é¡¹ç›®ç»“æ„

```
copaw_09/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ brain/          # è„‘éƒ¨æ¨¡å—
â”‚   â”œâ”€â”€ channels/       # æ¸ é“é€‚é…
â”‚   â”œâ”€â”€ gateway/        # ç½‘å…³
â”‚   â””â”€â”€ router.py       # è·¯ç”±
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ agent_00_ç®¡ç†é«˜æ‰‹/
â”‚   â”œâ”€â”€ agent_01_å­¦éœ¸/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ tests/              # å•å…ƒæµ‹è¯•
â””â”€â”€ docs/               # æ–‡æ¡£
```

### 5.2 è¿è¡Œæµ‹è¯•

```bash
cd /home/ace09/bots/copaw_09
python -m pytest tests/ -v
```

### 5.3 TUI æ§åˆ¶å°æµ‹è¯•

```bash
# äº¤äº’æ¨¡å¼
python -m copaw_09.app.tui

# å•å‘½ä»¤æ¨¡å¼
python -m copaw_09.app.tui -c "brain"
python -m copaw_09.app.tui -c "gateway"
python -m copaw_09.app.tui -c "router"
python -m copaw_09.app.tui -c "agent"
python -m copaw_09.app.tui -c "all"
```

TUI å‘½ä»¤:
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| brain | æµ‹è¯•è„‘éƒ¨æ¨¡å— |
| gateway | æµ‹è¯•ç½‘å…³æ¨¡å— |
| router | æµ‹è¯•è·¯ç”±æ¨¡å— |
| agent | æµ‹è¯• Agent ç®¡ç† |
| feishu | æµ‹è¯•é£ä¹¦æ–‡æ¡£ |
| all | æµ‹è¯•æ‰€æœ‰æ¨¡å— |
| status | æŸ¥çœ‹æ¨¡å—çŠ¶æ€ |
| clear | æ¸…å± |
| quit | é€€å‡º |

---

## å…­ã€å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•æ·»åŠ æ–°çš„ Agentï¼Ÿ

ç¼–è¾‘ `agents/registry/__init__.py`ï¼Œåœ¨ `PREDEFINED_AGENTS` ä¸­æ·»åŠ ã€‚

### Q2: å¦‚ä½•æ·»åŠ æ–°çš„æ¸ é“ï¼Ÿ

åœ¨ `app/channels/` ä¸‹åˆ›å»ºæ–°çš„ Channel ç±»ï¼Œç»§æ‰¿ `BaseChannel`ã€‚

### Q3: å¦‚ä½•é…ç½®æ¨¡å‹ï¼Ÿ

åœ¨ `app/brain/` æ¨¡å—ä¸­ä¿®æ”¹ `MODEL_CONFIG`ã€‚

---

## ä¸ƒã€è”ç³»æ”¯æŒ

- é—®é¢˜åé¦ˆ: GitHub Issues
- åŠŸèƒ½å»ºè®®: è”ç³»ç»´æŠ¤è€…

---

*æœ€åæ›´æ–°: 2025-02-26*
